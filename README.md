# awesome docker commands

–†–µ—à–∏–ª —Å–æ–±—Ä–∞—Ç—å —á–∞—Å—Ç–æ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ cheatsheet –∫–∞–∫–æ–π-—Ç–æ

## üî∂ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ä–µ–¥—ã

### üî∏ –°–æ–∑–¥–∞–Ω–∏–µ `Dockerfile`

üí° –õ—É—á—à–µ, –∫–æ–Ω–µ—á–Ω–æ, –æ—Ç —Ä—É—Ç–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å
```
FROM python:3.9-slim-buster
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "main.py"]
```

### üî∏ –°–æ–∑–¥–∞–Ω–∏–µ `docker-compose.yml`

```
services:
  app:
    build: .  # Dockerfile –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    environment:
      - PYTHONUNBUFFERED=1 # –û—Ç–∫–ª—é—á–∞–µ–º –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é –≤—ã–≤–æ–¥–∞ Python
```

## üî∂ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–°–æ–±—Ä–∞—Ç—å + –∑–∞–ø—É—Å—Ç–∏—Ç—å ‚Äî `Dockerfile` + `docker-compose.yml`, `docker-compose up --build -d`, –≥–¥–µ -d —ç—Ç–æ detached _(–Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Å–æ–ª–∏)_

–ü–æ—Å–º–æ—Ä–µ—Ç—å –∞–π–¥–∏—à–∫—É ‚Äî `docker ps -a`, –≥–¥–µ -a —ç—Ç–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–∂–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–°–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî `docker commit 285050f6f6ed img_name`

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –¥–∏—Å–∫ ‚Äî `docker save -o path_to_image.tar img_name`

–ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑ —Å –¥–∏—Å–∫–∞ ‚Äî `docker load -i path_to_image.tar`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–∑–∞ ‚Äî `docker images`

–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî `docker run -ti -d -v /etc/timezone:/etc/timezone:ro -v /etc/localtime:/etc/localtime:ro --restart=unless-stopped img_name`, –≥–¥–µ --restart=unless-stopped —ç—Ç–æ —Ä–µ—Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ –û–°

## üî∂ –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ _(–∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥)_ ‚Äî `docker logs 285050f6f6ed -f`, –≥–¥–µ -f —ç—Ç–æ follow, –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî `docker exec -ti 285050f6f6ed /bin/bash`

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª/–ø–∞–ø–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî `docker cp path_to_file.bin 285050f6f6ed:/path_inside_container.bin`

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª/–ø–∞–ø–∫—É –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî `docker cp 285050f6f6ed:/path_inside_container.bin path_to_file.bin`

## üî∂ –ß–∞—Å—Ç—ã–µ –∫–µ–π—Å—ã

### üî∏ –ó–∞–π—Ç–∏ –≤ ¬´—Å–ª–æ–º–∞–Ω–Ω—ã–π¬ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–ß–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂—É—Ö—É, –∫–æ—Ç–æ—Ä–∞—è —Å—Ä–∞–∑—É –∂–µ –ø–∞–¥–∞–µ—Ç –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–æ–ø–∞–µ—Ç—Å—è.

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –ø–æ–º–µ–Ω—è—Ç—å –µ–º—É entrypoint:

```
docker commit efc9c462478e temp_img
docker run -it -p 8080:8080 --entrypoint /bin/bash temp_img
```

### üî∏ –ü–æ–¥–∫–ª—é—á–∏—Ç—å –ª–µ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫ —Å–µ—Ç–∫–µ

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥—Å–æ—Å–∞—Ç—å—Å—è –∫ –°–£–ë–î –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å —Å–µ—Ç–∫–æ–π.

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–µ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Å–µ—Ç–∫—É —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```
docker network connect network_name efc9c462478e
```

–ê –Ω–∞–π—Ç–∏ —Å–µ—Ç–∫—É –∏ —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ –°–£–ë–î –∏–º–µ–Ω–Ω–æ –≤ –Ω—É–∂–Ω–æ–π —Å–µ—Ç–∫–µ —á–µ—Ä–µ–∑

```
docker network list
docker network inspect network_name <-- –≤—ã–≤–µ–¥–µ—Ç –∫–∞–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ç—É—Å—è—Ç –≤ —ç—Ç–æ–π —Å–µ—Ç–∫–µ
```

### üî∏ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NET8

–£ –º–µ–Ω—è Debian/Ubuntu (`cat /etc/os-release`), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º `apt-get install -y dotnet-sdk-8.0` –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –¥–æ—Ç–Ω–µ—Ç, —á—Ç–æ –±—ã —è –Ω–µ –¥–µ–ª–∞–ª.

–ù–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞—à–ª–æ—Å—å:

```
apt-get install -y gpg
wget -O - https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor -o microsoft.asc.gpg
mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/
wget https://packages.microsoft.com/config/ubuntu/22.04/prod.list
mv prod.list /etc/apt/sources.list.d/microsoft-prod.list
apt-get update && apt-get install -y dotnet-sdk-8.0
```
